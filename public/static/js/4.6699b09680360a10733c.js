webpackJsonp([4,11],{316:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(7),o=a(5),r=a(15);e.default={data:function(){return{tableData:[],options:[],loading:!1,form:new r.Form({checked:!1,perms:[],name:"",display_name:"",description:""})}},created:function(){this.fetchRole(),this.fetchPerms()},methods:{fetchRole:function(){var t=this;console.log(o.roleUrl+"/"+this.$route.params.id),s.http.get(o.roleUrl+"/"+this.$route.params.id).then(function(e){var a=e.data,s=a.name,o=a.description,r=a.display_name;t.form.name=s,t.form.display_name=r,t.form.description=o,t.tableData=e.data.perms})},fetchPerms:function(){var t=this,e=[];s.http.get(o.permUrl).then(function(a){for(var s=0;s<a.data.length;s++)e.push({value:a.data[s].id,label:a.data[s].name});t.options=e})},askEdit:function(){var t=this;swal({title:"Confirmar atualização do Grupo: "+this.form.name+" ?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:"Cancelar",confirmButtonText:"Sim, atualizar!",closeOnConfirm:!1},function(){return t.updateGroup()})},updateGroup:function(){var t=this;this.loading=!0,this.form.put(o.roleUrl+"/"+this.$route.params.id).then(function(e){swal("Dados atualizados!","","success"),t.loading=!1,t.form.reset(),t.fetchRole()}).catch(function(e){sweetAlert("Oops...","Verifique os erros","error"),console.log(e),t.loading=!1})},formatterCreated:function(t,e){return moment(t.created_at).format("DD/MM/YYYY HH:mm:ss")},formatterUpdated:function(t,e){return moment(t.updated_at).format("DD/MM/YYYY HH:mm:ss")},date:function(t){return moment(t).format("DD/MM/YYYY HH:mm:ss")}},watch:{$route:["fetchRole","fetchPerms"]}}},317:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(15),o=a(5),r=a(7);e.default={metaInfo:{titleTemplate:"%s - Usuários"},data:function(){return{form:new s.Form({name:"",display_name:"",description:""}),rows:[],dialogVisible:!1,loading:!1,msg:""}},methods:{openModal:function(){this.dialogVisible=!0},newGroup:function(){var t=this;this.loading=!0,this.form.post(o.roleUrl).then(function(e){t.msg="Papel "+e.data.name+" criado com sucesso!",t.rows.push(e.data),t.refreshTable(),t.loading=!1,t.form.reset()}).catch(function(e){t.loading=!1})},refreshTable:function(){self.dtHandle.destroy(),setTimeout(function(){self.dtHandle=$("#table1").DataTable()},100)},fetchData:function(){var t=this;r.http.get(o.roleUrl).then(function(e){console.log(e),t.rows=e.data,t.refreshTable()}).catch(function(t){console.log(t)})}},created:function(){this.fetchData(),setTimeout(function(){self.dtHandle=$("#table1").DataTable()},100)},watch:{$route:"fetchData"}}},459:function(t,e,a){e=t.exports=a(2)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"edit.vue",sourceRoot:"webpack://"}])},460:function(t,e,a){e=t.exports=a(2)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:"webpack://"}])},516:function(t,e,a){var s=a(459);"string"==typeof s&&(s=[[t.id,s,""]]);a(3)(s,{});s.locals&&(t.exports=s.locals)},517:function(t,e,a){var s=a(460);"string"==typeof s&&(s=[[t.id,s,""]]);a(3)(s,{});s.locals&&(t.exports=s.locals)},549:function(t,e,a){var s,o;a(516),s=a(316);var r=a(600);o=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(o=s=s.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=s},550:function(t,e,a){var s,o;a(517),s=a(317);var r=a(601);o=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(o=s=s.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=s},600:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"row row-condensed"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"col-xs-4"},[a("router-link",{staticClass:"btn bg-warning-400 btn-block btn-float btn-float-lg",attrs:{to:{name:"role.index",params:{}}}},[a("i",{staticClass:"icon-list"}),t._v(" "),a("span",[t._v("Listar Todos")])])],1)]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"panel-heading"},[a("h6",{staticClass:"panel-title"},[t._v("Grupo ("+t._s(t.form.name)+")"),t._m(2)]),t._v(" "),a("div",{staticClass:"heading-elements"},[a("ul",{staticClass:"icons-list"},[a("li",{staticClass:"dropdown"},[t._m(3),t._v(" "),a("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[a("li",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._m(4)])])])])])]),t._v(" "),a("div",{staticClass:"panel-body"},[a("alert-errors",{attrs:{form:t.form,classe:"alert bg-danger alert-styled-left",message:""}}),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("label",{attrs:{for:""}},[t._v("Nome:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("label",{attrs:{for:""}},[t._v("Nome de Exibição:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.display_name,expression:"form.display_name"}],staticClass:"form-control",attrs:{type:"text",name:""},domProps:{value:t.form.display_name},on:{input:function(e){e.target.composing||(t.form.display_name=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("label",{attrs:{for:""}},[t._v("Criado em:")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",name:"",disabled:""},domProps:{value:t.date(t.form.created_at)}})]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("label",{attrs:{for:""}},[t._v("Ultima atualização:")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",name:"",disabled:""},domProps:{value:t.date(t.form.updated_at)}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6 form-group"},[a("label",{attrs:{for:""}},[t._v("Níveis de Permissão")]),a("br"),t._v(" "),a("el-select",{attrs:{disabled:t.form.checked,multiple:"",placeholder:"Escolha os Niveis de Permissão"},model:{value:t.form.perms,callback:function(e){t.form.perms=e},expression:"form.perms"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"col-lg-6 form-group"},[a("el-checkbox",{model:{value:t.form.checked,callback:function(e){t.form.checked=e},expression:"form.checked"}},[t._v("Todas as Permissões")])],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.askEdit()}}},[t._v("EDITAR")])],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Permissões associadas ("+t._s(t.tableData.length)+")")]),a("br"),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"name",label:"Nome",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"display_name",label:"Nome de Exibição",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"Descrição",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",formatter:t.formatterCreated,label:"Data de criação",sortable:"",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updated_at",formatter:t.formatterUpdated,label:"Data de atualização",sortable:""}})],1)],1)],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xs-4"},[a("button",{staticClass:"btn bg-teal-400 btn-block btn-float btn-float-lg",attrs:{type:"button"}},[a("i",{staticClass:"icon-database-add"}),t._v(" "),a("span",[t._v("Add Novo Grupo")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xs-4"},[a("button",{staticClass:"btn bg-blue-400 btn-block btn-float btn-float-lg",attrs:{type:"button"}},[a("i",{staticClass:"icon-database-edit2"}),t._v(" "),a("span",[t._v("Editar")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"heading-elements-toggle"},[a("i",{staticClass:"icon-more"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown","aria-expanded":"false"}},[a("i",{staticClass:"icon-menu7"}),t._v(" "),a("span",{staticClass:"caret"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"icon-sync"}),t._v(" Atualizar dados\n                  ")])}]}},601:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[2==t.$route.matched.length?[t.dialogVisible?a("el-dialog",{attrs:{title:"Criar novo Grupo de Usuários",size:"small","before-close":t.handleClose},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[a("div",{staticClass:"row"},[a("form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],on:{submit:function(e){e.preventDefault(),t.newGroup(e)},keydown:function(e){t.form.errors.clear(e.target.name)}}},[a("alert-success",{attrs:{form:t.form,message:t.msg}}),t._v(" "),a("alert-errors",{attrs:{form:t.form,classe:"alert bg-danger alert-styled-left",message:""}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Nome")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||(t.form.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Nome de Exibição")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.display_name,expression:"form.display_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.display_name},on:{input:function(e){e.target.composing||(t.form.display_name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Descrição")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{rows:"5",cols:"80"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||(t.form.description=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn bg-blue btn-labeled heading-btn",attrs:{type:"submit"}},[a("b",[a("i",{staticClass:"icon-floppy-disk"})]),t._v(" SALVAR")])])])])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Fechar")])],1)]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("button",{staticClass:"pull-right btn bg-blue btn-labeled heading-btn",attrs:{type:"button"},on:{click:function(e){t.dialogVisible=!0}}},[t._m(0),t._v(" Criar Grupo")])])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("datatable-slot",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],attrs:{title:"Grupos de Usuário",id:"table1",url:"http://localhost:8000/api/teste",headers:[{header:"#"},{header:"Nome"},{header:"Nome de Exibição"},{header:"Descrição"},{header:"Criado em"},{header:"Ações"}]}},t._l(t.rows,function(e,s){return a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.display_name))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.created_at))]),t._v(" "),a("td",{attrs:{sortable:"false"}},[a("ul",{staticClass:"icons-list"},[a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[a("i",{staticClass:"icon-menu9"})]),t._v(" "),a("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[a("li",[a("router-link",{attrs:{to:{name:"role.edit",params:{id:e.id}}}},[a("i",{staticClass:"icon-database-edit2"}),t._v(" Editar")])],1)])])])])])}))],1)]:[a("router-view")]],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b",[a("i",{staticClass:"icon-users4"})])}]}}});
//# sourceMappingURL=4.6699b09680360a10733c.js.map